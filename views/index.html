<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">

  
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script type="text/javascript">

    function joinBtn(){
        fetch('http://localhost:3000/user/join') // new Promise 
        .then(data => {
            return data.text(); // new Promise
        })
        .then(text => {
            document.querySelector("#join_view").innerHTML = text;
        })
    }

    // async function userid_check(){
    //      login_flag = ab.data.login;
    //   let ab = await fetch(`http://localhost:3000/user/join?userid=${userid.value}`)
    //     .then(data =>{
    //         return data.json();
    //     })
    //     .then(json=>{
    //         if(login_flag){
    //             userid_msg.innerHTML = '중복된 아이디'
    //         }else{
    //             userid_msg.innerHTML = '사용가능 아이디'
    //         }
    //     })
    // }
    // console.log(userid_check());
    // //  const userid = document.querySelector('#userid')

    // async function userid_check(){
    //     let wow = await axios.get(`http://localhost:3000/user/join?userid=${userid.value}`);
    //     console.log(wow)
    //     //ajax로 가져왔다 가정 중복 false 중복아니다 true
    //     //서버에 보내서 데이터를 조회하고 결과가 조회되면 트루 안되면 펄스 중복이냐 아니냐
    //     login_flag = wow.data.login;
      
    //     if(login_flag){
    //         userid_msg.innerHTML = '올바른 아이디입니다.'
    //         userid_msg.style.color = 'green';
    //     }else{
    //         userid_msg.innerHTML = '중복된 아이디입니다.'
    //         userid_msg.style.color = 'black';
    //     }

    // }
    
    </script>
</head>
<body>
    
<div id="wrap">
    <div class="tt">
        {{userid}}<br/>
        {{name}}
        로그인접속유무
    </div>
    <div id="content">
        <div class="ToDo wt50">
            <h2>게시판</h2>
           
        </div>
       
        <div class="join wt50">
            <h2 class="bt"> 회원가입/로그인</h2>
            <div id="join_view">

            </div>
        </div>
   
        <div class="Weather wt50">
            <h2>오늘 날씨</h2>
            <div id="weather_view">
                
            </div>
        </div>

        <div class="Home wt50">
            <h2 class="bt2">오늘의 명언</h2>
            <div id="Home_view" style="display:none;">
            
            </div> 
        </div>
      
        <label id="userId">
            <span class="sp"></span>
            <span class="sp"></span>
            <span class="sp"></span>
        </label>
    </div>
    
</div>
<script type="text/javascript">
const quoteText = document.querySelector(".quote__text");
const quoteAutor = document.querySelector(".quote__author");

function getQuote() {
    function randomItem(a) {
        return a[Math.floor(Math.random() * a.length)];
    }

    fetch("https://type.fit/api/quotes")
        .then(function (response) {
            return response.json();
        })
        .then(function (data) {
            const random = randomItem(data);
            const author = random.author;
            const text = random.text;
            quoteText.innerText = `${text}`;
            quoteAutor.innerText = `- ${author} -`;
        });
}

document.querySelector(".Home").addEventListener('click',getQuote());


document.querySelector(".bt2").addEventListener('click', function () {
    document.querySelector(".Home").style.width ="100%"
    document.querySelector(".Home").style.height ="100%";
    document.querySelector(".Home").style.top ="0%";
    document.querySelector("#Home_view").style.display = 'block';

    fetch('http://localhost:3000/saying') // new Promise 
    .then(data => {
        return data.text(); // new Promise
    })
    .then(text => {
        console.log(text);
        document.querySelector("#Home_view").innerHTML = text;
    })
});
document.querySelector(".Weather").addEventListener('click', function () {
    document.querySelector(".Weather").style.width ="100%";
    document.querySelector(".Weather").style.height ="100%";
    document.querySelector(".Weather").style.top ="0%";
    document.querySelector(".Home").style.top="100%";

    fetch('http://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=20313df3cc7ccf0b314fd37d36732f83&lang=kr&&units=metric')
    .then(data=>{
        return data.json();
    })
    .then(json => {
        console.log(json);
        document.querySelector('#weather_view').innerHTML = json.main.temp;
    })
    
});

document.querySelector(".bt").addEventListener('click', function () {
    document.querySelector(".join").style.width ="100%";
    document.querySelector(".join").style.height ="100%";
    document.querySelector(".join").style.top ="0%";
    document.querySelector(".Home").style.top="100%";
    document.querySelector(".Weather").style.top="100%";
    document.querySelector("#join_view").style.display='block'

    fetch('http://localhost:3000/user')
    .then(data => {
        console.log(data)
        return data.text();
        
    })
    .then(text => {
       
        document.querySelector("#join_view").innerHTML = text;
    })
});





// let btn  = document.querySelector('.join');

// let btn_10 = function(){
//     document.querySelector(".join").style.width ="100%";
//     document.querySelector(".join").style.height ="100%";
//     document.querySelector(".join").style.top ="0%";
//     document.querySelector(".Home").style.top="100%";
//     document.querySelector(".Weather").style.top="100%";


// let btn  = document.querySelector('.join');

// let btn_10 = function(){
//     document.querySelector(".join").style.width ="100%";
//     document.querySelector(".join").style.height ="100%";
//     document.querySelector(".join").style.top ="0%";
//     document.querySelector(".Home").style.top="100%";
//     document.querySelector(".Weather").style.top="100%";


//     fetch('http://localhost:3000/user')
//     .then(data => {
//         return data.text();
//     })
//     .then(text => {
//         document.querySelector("#join_view").innerHTML = text;
//     })
//     btn.removeEventListener('click',btn_10);
// }
// btn.addEventListener('click',btn_10);

document.querySelector(".ToDo").addEventListener('click', function () {
    document.querySelector(".ToDo").style.width ="100%";
    document.querySelector(".ToDo").style.height ="100%";
    document.querySelector(".ToDo").style.top ="0%";
    document.querySelector(".Home").style.top="100%";
    document.querySelector(".Weather").style.top="100%";
    document.querySelector(".join").style.top="100%";
});

document.querySelector("#userId").addEventListener('click',()=>{
    document.querySelector(".Home").style.width ="65%"
    document.querySelector(".Home").style.height ="562px";
    document.querySelector(".Home").style.top ="20%";
    document.querySelector("#Home_view").style.display = 'none';

    document.querySelector(".Weather").style.width ="65%";
    document.querySelector(".Weather").style.height ="562px";
    document.querySelector(".Weather").style.top="16%";

    document.querySelector(".join").style.width ="65%";
    document.querySelector(".join").style.height ="562px";
    document.querySelector(".join").style.top ="12%";
    document.querySelector("#join_view").style.display='none';

    document.querySelector(".ToDo").style.width ="65%";
    document.querySelector(".ToDo").style.height ="562px";

    document.querySelector(".ToDo").style.top ="8%";

    document.querySelector(".ToDo").style.top ="8%"; 

})

</script>



</body>
</html>

